# JWT认证中间件接口文档

## 概述

JWT认证中间件用于验证请求是否携带了有效的JWT令牌。所有通过此中间件的请求都必须在请求头中包含有效的JWT令牌，格式为`Authorization: Bearer <token>`或简单的`Authorization: <token>`。此中间件保证了接口的安全访问，仅允许持有有效令牌的请求通过。

## 鉴权要求

### 请求头

- `Authorization`: 必须包含有效的JWT令牌。接受格式为`Bearer <token>`或`<token>`。

### 错误响应

- `401 Unauthorized`：如果请求未携带token、token无效或token格式错误，将返回状态码401，表示无权限访问。

    - 未携带token的错误响应示例：

      ```json
      {
        "error": "请求未携带token，无权限访问"
      }
      ```

    - token格式错误的错误响应示例：

      ```json
      {
        "error": "请求携带的token格式错误，无权限访问"
      }
      ```

    - 无效的token的错误响应示例：

      ```json
      {
        "error": "无效的token"
      }
      ```

## 特殊处理

- 在请求头中正确提供JWT令牌后，该中间件会对令牌进行验证，并解析令牌中的用户信息。
- 验证成功后，用户的ID和用户名将被注入请求的上下文中，以供后续处理流程使用。

## 注意事项

- 所有通过此中间件的请求都必须遵守上述鉴权要求，否则将无法成功访问受保护的资源。
- 建议使用HTTPS协议来增强请求的安全性，特别是在携带JWT令牌进行认证的请求中。
- 中间件日志将记录关于token验证失败的详细信息，包括请求IP和请求头部信息，以便于问题的调试和追踪。
